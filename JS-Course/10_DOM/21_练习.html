<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <script>
            window.onload = function () {
                /* 
                    全选功能
                    取消
                    反选
                    提交
                    小checkbox和大checkbox同步
                */

                const check_box = document.getElementsByName('hobby');
                const allbtn = document.getElementById('all');
                const nobtn = document.getElementById('no');
                const reversebtn = document.getElementById('reverse');
                const sendbtn = document.getElementById('send');
                const checkall = document.getElementById('check-all');
                const mybox = document.getElementById('mybox');

                // console.log(check_box);
                
                /* 
                    全选功能
                        - 点击按钮后，使四个多选框都变成选中状态
                */
                allbtn.addEventListener('click',()=>{
                    for (const box of check_box) {
                        box.checked = true;
                    }

                    checkall.checked = true;
                })

                /* 
                    取消功能
                        - 点击按钮后，使四个多选框都变成非选中状态
                */
                nobtn.addEventListener('click',()=>{
                    for (const box of check_box) {
                        box.checked = false;
                    }

                    checkall.checked = false;
                })
                
                /* 
                    反选功能
                        - 点击按钮后，使四个多选框都变成与之前相反的状态
                */
                reversebtn.addEventListener('click',()=>{
                    for (const box of check_box) {
                        // if (box.checked === true) {
                        //     box.checked = false;
                        // }else{
                        //     box.checked = true;
                        // }
                        box.checked = !box.checked;
                    }

                    const checked_box = document.querySelectorAll('[name=hobby]:checked');
                    // console.log(checked_box.length); 
                    if (checked_box.length===check_box.length) {
                        checkall.checked = true;
                    }else{
                        checkall.checked = false;
                    }

                })
                
                /* 
                    提交功能
                        - 点击按钮后，提示选中了哪些选项
                */
                sendbtn.addEventListener('click',()=>{
                    for (const box of check_box) {
                        // if (box.checked) {
                        //     alert(box.value);
                        // }
                        box.checked&&alert(box.value);
                    }
                })
                
                /* 
                    check-all
                        - 全选checkbox发生变化后，将小的checkbox和它同步
                */
                checkall.addEventListener('change',function(){
                    for (const box of check_box) {
                        box.checked = this.checked;
                    }
                })

                /* 
                    使全选checkbox和四个checkbox进行同步
                        如果四个全选了，则全选checkbox也选中
                        如果四个没全选，则全选checkbox也不选中
                */
                // for (const box of check_box) {
                //     box.onchange = function(){
                //         const checked_box = document.querySelectorAll('[name=hobby]:checked');
                //         // console.log(checked_box.length); 
                //         if (checked_box.length===check_box.length) {
                //             checkall.checked = true;
                //         }else{
                //             checkall.checked = false;
                //         }
                //     }
                // }
                mybox.onchange = function(){
                    const checked_box = document.querySelectorAll('[name=hobby]:checked');
                    if (checked_box.length === check_box.length) {
                        checkall.checked = true;
                    }else{
                        checkall.checked = false;
                    }
                };
            }
        </script>
    </head>
    <body>
        <div>
            <form action="#">
                <div>
                    请选择你的爱好：
                    <input type="checkbox" id="check-all" /> 全选
                </div>
                <div id="mybox">
                    <input type="checkbox" name="hobby" value="乒乓球" /> 乒乓球
                    <input type="checkbox" name="hobby" value="篮球" /> 篮球
                    <input type="checkbox" name="hobby" value="羽毛球" /> 羽毛球
                    <input type="checkbox" name="hobby" value="足球" /> 足球
                </div>
                <div>
                    <button type="button" id="all">全选</button>
                    <button type="button" id="no">取消</button>
                    <button type="button" id="reverse">反选</button>
                    <button type="button" id="send">提交</button>
                </div>
            </form>
        </div>
    </body>
</html>